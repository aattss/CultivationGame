<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="stylesheet" type="text/css" href="interface.css" />
  </head>
  <body>
    <div class="row">
      <div class="column">
        Year: <span id="age"></span>
        <br />
        <button onclick="pauseGame()">Pause Game</button>
        <br />
        <button onclick="toggleNightMode()">Night Mode</button>
        <br />
        <button onclick="resetSave()">Reset Save</button>
        <br />
        <button onclick="saveGameToFile()">Save to File</button>
        <br />
        <button onclick="loadGameFromFile()">Load from File</button>
        <br />
        <div id="toggle-extra-meridians-container">
          <button id="toggle-extra-meridians" onclick="toggleExtraMeridians()">Disable Extra Meridians</button>
          <br />
        </div>
        <br />

        <!-- Tab Container -->
        <div class="tab-container">
          <div class="tab-buttons">
            <button class="tab-button active" onclick="switchTab('current')">Current Stats</button>
            <button class="tab-button" onclick="switchTab('records')">Records & Averages</button>
          </div>

          <!-- Current Stats Tab -->
          <div id="current-tab" class="tab-content active">
            Power Level: <span id="combat power"></span>
            <br />
            Meridians opened: <span id="meridian opened"></span>
            <br />
            <div id="qi-capacity-container">
              Qi: <span id="qi"></span> / <span id="qi capacity"></span>
              <br />
            </div>
            <div id="qi-purity-container">
              Qi Purity: <span id="qi purity"></span>
              <br />
            </div>
            <div id="qi-folds-container">
              Qi folds: <span id="qi folds"></span>
              <br />
              Organs Purified: <span id="organs purified"></span>
              <br />
            </div>
            <div id="dantian-formation-container">
              Organ Cleanse Cycles: <span id="cycles cleansed"></span>
              <br />
              Pillars: <span id="pillars"></span>
              <br />
              Dantian Grade: <span id="dantian grade"></span>
              <br />
            </div>
            <div id="acupoints-container">
              Acupoints: <span id="acupoints"></span>
              <br />
            </div>
            <div id="chakras-container">
              Chakras opened: <span id="chakras opened"></span>
              <br />
              Treasure quality: <span id="treasure quality"></span>
              <br />
            </div>
            <br />
            <div id="circulation-skill-container">
              Circulation Skill: <span id="circulation skill"></span>
              <br />
              Circulation Grade: <span id="circulation grade"></span>
              <br />
            </div>
            <br />
            <div id="meridian-talent-container">
              Meridian Talent: <span id="meridian talent"></span>
              <br />
            </div>
            <div id="vitality-container">
              Vitality: <span id="vitality"></span>
              <br />
            </div>
            <div id="wisdom-container">
              Wisdom: <span id="wisdom"></span>
              <br />
            </div>
            <div id="luck-container">
              Luck: <span id="luck"></span>
              <br />
            </div>
            <div id="comprehension-container">
              Comprehension: <span id="comprehension"></span>
              <br />
            </div>
            Potential: <span id="potential"></span>
            <br />
          </div>

          <!-- Records & Averages Tab -->
          <div id="records-tab" class="tab-content">
            <div id="highest-meridian-container">
              Highest Meridian: <span id="highest meridian"></span>
              <br />
            </div>
            <div id="highest-qi-folds-container">
              Highest Qi Folds: <span id="highest qi folds"></span>
              <br />
            </div>
            <div id="highest-dantian-container">
              Highest Dantian Grade: <span id="highest dantian grade"></span>
              <br />
            </div>
            <div id="highest-chakras-container">
              Highest Chakras: <span id="highest chakras"></span>
              <br />
            </div>
            Highest Potential: <span id="highest potential"></span>
            <br />
            <br />
            Last Ten Runs Average:
            <br />
            Average Age: <span id="average age"></span>
            <br />
            <div id="average-meridians-container">
              Average Meridians: <span id="average meridians"></span>
              <br />
            </div>
            <div id="average-primary-meridians-container">
              Average Age Opened Primary Meridians:
              <span id="average primary meridians"></span>
              <br />
            </div>
            <div id="average-extraordinary-meridians-container">
              Average Age Opened All Extraordinary Meridians:
              <span id="average extraordinary meridians"></span>
              <br />
            </div>
            <div id="average-qi-folds-container">
              Average Qi Folds: <span id="average qi folds"></span>
              <br />
            </div>
            <div id="average-chakras-container">
              Average Chakras: <span id="average chakras"></span>
              <br />
            </div>
            Average Potential: <span id="average potential"></span>
            <br />
          </div>
        </div>

        <div class="upgrade-shop">
          <h3>Growth</h3>
          Samsara Points: <span id="samsara-points"></span>
          <div id="upgrade-list"></div>
        </div>
      </div>
      <div class="column scroll">
        <div class="tab-buttons">
          <button id="log-event-btn" class="tab-button active" onclick="switchLogType('event')">Events</button>
          <button id="log-lifeMilestone-btn" class="tab-button" onclick="switchLogType('lifeMilestone')">
            Life Milestones
          </button>
          <button id="log-upgrade-btn" class="tab-button" onclick="switchLogType('upgrade')">Upgrades</button>
        </div>
        <pre><span id="log"></span></pre>
      </div>
    </div>
    <script type="module" src="./dist/index.js"></script>
    <script>
      // Night mode functionality
      function toggleNightMode() {
        const body = document.body;
        const isNightMode = body.classList.toggle("dark-mode");

        // Update button text
        const button = event.target;
        button.textContent = isNightMode ? "Light Mode" : "Night Mode";

        // Save preference to localStorage
        localStorage.setItem("nightMode", isNightMode);
      }

      // Load night mode preference on page load
      function loadNightModePreference() {
        const nightModeEnabled = localStorage.getItem("nightMode") === "true";
        if (nightModeEnabled) {
          document.body.classList.add("dark-mode");
          // Update button text if it exists
          const nightModeButton = document.querySelector('button[onclick="toggleNightMode()"]');
          if (nightModeButton) {
            nightModeButton.textContent = "Light Mode";
          }
        }
      }

      // Initialize night mode on page load
      document.addEventListener("DOMContentLoaded", loadNightModePreference);

      function switchTab(tabName) {
        // Hide all tab contents
        const tabContents = document.querySelectorAll(".tab-content");
        tabContents.forEach((content) => {
          content.classList.remove("active");
        });

        // Remove active class from all tab buttons
        const tabButtons = document.querySelectorAll(".tab-button");
        tabButtons.forEach((button) => {
          button.classList.remove("active");
        });

        // Show the selected tab content
        const selectedTab = document.getElementById(tabName + "-tab");
        if (selectedTab) {
          selectedTab.classList.add("active");
        }

        // Add active class to the clicked button
        const clickedButton = event.target;
        clickedButton.classList.add("active");
      }

      function switchLogType(logType) {
        // Call the UISystem method to switch logs
        if (window.UISystem) {
          window.UISystem.switchLogType(logType);
        }
      }
    </script>
  </body>
</html>
